Version 4
SHEET 1 1100 728
WIRE -96 80 -128 80
WIRE 16 80 -16 80
WIRE 112 80 16 80
WIRE 144 80 112 80
WIRE 256 80 224 80
WIRE 112 160 112 80
WIRE 144 160 112 160
WIRE -128 176 -128 80
WIRE -128 176 -160 176
WIRE 256 176 256 80
WIRE 256 176 208 176
WIRE 288 176 256 176
WIRE 144 192 112 192
WIRE -448 272 -480 272
WIRE -320 272 -368 272
WIRE -288 272 -320 272
WIRE -176 272 -208 272
WIRE -128 272 -128 176
WIRE -96 272 -128 272
WIRE 112 272 112 192
WIRE 112 272 -16 272
WIRE 144 272 112 272
WIRE 256 272 224 272
WIRE 16 304 16 80
WIRE 112 304 112 272
WIRE -320 352 -320 272
WIRE -288 352 -320 352
WIRE -176 368 -176 272
WIRE -176 368 -224 368
WIRE -144 368 -176 368
WIRE -32 368 -64 368
WIRE 256 368 256 272
WIRE 256 368 160 368
WIRE -432 384 -464 384
WIRE -320 384 -352 384
WIRE -288 384 -320 384
WIRE -464 416 -464 384
WIRE -320 416 -320 384
WIRE 16 464 16 400
WIRE 112 464 112 400
WIRE 112 464 16 464
WIRE 256 464 256 368
WIRE 256 464 112 464
WIRE 112 496 112 464
WIRE -320 528 -320 496
FLAG 288 176 OUT
IOPIN 288 176 Out
FLAG -160 176 SIGNAL
IOPIN -160 176 In
FLAG -464 416 0
FLAG -480 272 GAIN
IOPIN -480 272 In
FLAG 112 496 VGND
IOPIN 112 496 In
FLAG -320 528 VCC
IOPIN -320 528 In
SYMBOL res 240 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 1K
SYMBOL res 240 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1K
SYMBOL njf 160 304 M0
WINDOW 0 0 109 Left 2
WINDOW 3 -72 136 Left 2
SYMATTR InstName J2
SYMATTR Value 2SK3557
SYMBOL njf -32 304 R0
WINDOW 0 3 108 Left 2
WINDOW 3 -72 137 Left 2
SYMATTR InstName J1
SYMATTR Value 2SK3557
SYMBOL res 0 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1K
SYMBOL res 0 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1K
SYMBOL res -48 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 100K
SYMBOL res -336 400 R0
SYMATTR InstName R4
SYMATTR Value 100K
SYMBOL res -336 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 116K
SYMBOL res -192 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100K
SYMBOL res -352 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 420K
SYMBOL opamp 176 176 R0
SYMATTR InstName X2
SYMBOL opamp -256 368 R0
SYMATTR InstName X1
TEXT -1136 176 Left 2 ;Calibrate J1 gate voltage VG for 50mVpp output @100mVpp input
TEXT -1136 360 Left 2 ;shift = (VGND + VG - VCC) / 2 = 0.158 (SPICE)
TEXT -1136 320 Left 2 ;Shift/scale/invert [0, VCC] to [VGND, VG]:
TEXT -1136 216 Left 2 ;For SPICE simulation VG = 1.416V
TEXT -1136 400 Left 2 ;scale = (VGND - VG) / VCC = 0.238 (SPICE)
TEXT -1136 440 Left 2 ;R1/R2 = 1 / scale
TEXT -1136 480 Left 2 ;R3/R4 = 1 + ((shift * 4) / (VCC * (scale + 1) - shift))
