Version 4
SHEET 1 2340 680
WIRE 1104 -208 480 -208
WIRE 1136 -208 1104 -208
WIRE 1248 -208 1216 -208
WIRE 480 -128 480 -208
WIRE 512 -128 480 -128
WIRE 608 -128 576 -128
WIRE 768 -128 608 -128
WIRE 480 -96 480 -128
WIRE 608 -96 608 -128
WIRE 848 -96 816 -96
WIRE 960 -96 928 -96
WIRE 992 -96 960 -96
WIRE 1104 -96 1104 -208
WIRE 1104 -96 1072 -96
WIRE 1136 -96 1104 -96
WIRE 1248 -80 1248 -208
WIRE 1248 -80 1200 -80
WIRE 1280 -80 1248 -80
WIRE 1136 -64 1104 -64
WIRE 1104 -32 1104 -64
WIRE 480 0 480 -32
WIRE 512 0 480 0
WIRE 608 0 608 -32
WIRE 608 0 576 0
WIRE 816 0 816 -96
WIRE 816 0 608 0
WIRE 848 0 816 0
WIRE 960 16 960 -96
WIRE 960 16 912 16
WIRE 480 32 480 0
WIRE 768 32 768 -128
WIRE 848 32 816 32
WIRE 816 64 816 32
WIRE 224 144 192 144
WIRE 336 144 304 144
WIRE 368 144 336 144
WIRE 480 144 480 112
WIRE 480 144 448 144
WIRE 512 144 480 144
WIRE 624 144 592 144
WIRE 656 144 624 144
WIRE 768 144 768 112
WIRE 768 144 736 144
WIRE 192 256 160 256
WIRE 224 256 192 256
WIRE 336 256 336 144
WIRE 336 256 304 256
WIRE 368 256 336 256
WIRE 480 272 480 144
WIRE 480 272 432 272
WIRE 624 272 624 144
WIRE 624 272 560 272
WIRE 656 272 624 272
WIRE 368 288 336 288
WIRE 768 288 768 144
WIRE 768 288 720 288
WIRE 656 304 624 304
WIRE 336 320 336 288
WIRE 624 336 624 304
WIRE 192 400 192 256
WIRE 224 400 192 400
WIRE 560 400 560 272
WIRE 560 400 304 400
FLAG 336 320 VGND
FLAG 192 144 SIGNAL1
IOPIN 192 144 In
FLAG 624 336 VGND
FLAG 816 64 VGND
FLAG 1104 -32 VGND
FLAG 160 256 SIGNAL2
IOPIN 160 256 In
FLAG 1280 -80 OUT
IOPIN 1280 -80 Out
SYMBOL res 320 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {r/2}
SYMBOL res 464 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {r}
SYMBOL res 320 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {r/2}
SYMBOL res 608 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {r}
SYMBOL res 752 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {r}
SYMBOL res 320 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value {r/4}
SYMBOL schottky 592 -96 R0
SYMATTR InstName D1
SYMATTR Value 1N5817
SYMBOL schottky 576 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value 1N5817
SYMBOL schottky 496 -32 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value 1N5817
SYMBOL schottky 512 -112 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value 1N5817
SYMBOL res 496 128 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value {r}
SYMBOL res 784 128 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R8
SYMATTR Value {r}
SYMBOL res 832 -80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R9
SYMATTR Value {r}
SYMBOL res 976 -80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value {r}
SYMBOL res 1120 -192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R11
SYMATTR Value {r}
SYMBOL opamp 400 272 R0
SYMATTR InstName X1
SYMBOL opamp 688 288 R0
SYMATTR InstName X2
SYMBOL opamp 880 16 R0
SYMATTR InstName X3
SYMBOL opamp 1168 -80 R0
SYMATTR InstName X4
TEXT 152 -80 Left 2 !.param r 3K
TEXT 888 216 Left 2 ;X1 out: -(SIGNAL2 + SIGNAL1)
TEXT 888 256 Left 2 ;X2 out: -(SIGNAL2 - SIGNAL1)
TEXT 888 336 Left 2 ;D2 + X3: when -(SIGNAL2 + SIGNAL1) < 0, X3 out: (SIGNAL2 + SIGNAL1)^2
TEXT 888 296 Left 2 ;D1 + X3: when -(SIGNAL2 - SIGNAL1) > 0, X3 out: -(SIGNAL2 - SIGNAL1)^2
TEXT 888 376 Left 2 ;D3 + X4: when -(SIGNAL2 + SIGNAL1) > 0, X4 out: -(SIGNAL2 + SIGNAL1)^2 - U3 out
TEXT 888 416 Left 2 ;D4 + X4: when -(SIGNAL2 - SIGNAL1) < 0, X4 out: (SIGNAL2 - SIGNAL1)^2 - U3 out
